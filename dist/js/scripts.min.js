var flickrApi="https://api.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=8b8ebb92e392334b7a21727d1b215b36&extras=url_m%2Csunny%2Curl_l%2Cnature&&per_page=100&page=1&format=json&nojsoncallback=1",list=[],pageList=[],currentPage=1,numberPerPage=10,numberOfPages=1,fragmentGallery=document.createDocumentFragment(),request=new XMLHttpRequest;function toggleButtons(e){switch(e.target.classList.value){case"button__prev":previousPage();break;case"button__next":nextPage();break;case"button__first":firstPage();break;case"button__last":lastPage()}}function toggleModal(e){var t=document.querySelector(".modal"),a=document.querySelector(".modal__image"),r=e.target.dataset.image,n=e.target.className;a.setAttribute("src",""),"thumbnail__image"==n&&a.setAttribute("src",r),t.classList.toggle("show__modal")}function loadImages(){var e=fragmentGallery.querySelectorAll(".thumbnail__image");e.forEach(function(t){setTimeout(function(){var e=t.dataset.image;t.setAttribute("src",e)},7*e.length)})}function createPage(){numberOfPages=getNumberOfPages()}function getNumberOfPages(){return Math.ceil(list.length/numberPerPage)}function nextPage(){currentPage+=1,loadPage()}function previousPage(){currentPage-=1,loadPage()}function firstPage(){currentPage=1,loadPage()}function lastPage(){currentPage=numberOfPages,loadPage()}function loadPage(){var e=(currentPage-1)*numberPerPage,t=(document.getElementsByClassName("thumbnail__image"),e+numberPerPage);pageList=list.slice(e,t),drawPage(),checkButtons()}function drawPage(){for(var e=document.getElementById("gallery");e.firstChild;)e.removeChild(e.firstChild);for(i=0;i<pageList.length;i++)document.getElementById("gallery").appendChild(pageList[i])}function checkButtons(){document.querySelector(".button__next").disabled=currentPage==numberOfPages,document.querySelector(".button__prev").disabled=1==currentPage,document.querySelector(".button__first").disabled=1==currentPage,document.querySelector(".button__last").disabled=currentPage==numberOfPages}function loadPages(){createPage(),loadPage()}request.open("GET",flickrApi,!0),request.onload=function(){var e=JSON.parse(this.response);if(200<=request.status&&request.status<400){e.photos.photo.forEach(function(e){var t=document.createElement("div"),a=document.createElement("img");t.setAttribute("class","thumbnail"),a.setAttribute("data-image",e.url_m),a.setAttribute("class","thumbnail__image"),a.addEventListener("click",toggleModal),t.appendChild(a),list.push(t),fragmentGallery.appendChild(t)})}else{var t=document.createElement("marquee");t.textContent="Api is not working",galleryPhoto.appendChild(t)}document.readyState&&loadImages(),loadPages()},request.send(),window.onload=function(){var e=document.querySelector(".button"),t=document.querySelector(".modal");e.addEventListener("click",toggleButtons),t.addEventListener("click",toggleModal)};